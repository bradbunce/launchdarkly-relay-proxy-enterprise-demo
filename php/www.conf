[www]
user = www-data
group = www-data
listen = /var/run/php-fpm.sock
listen.owner = www-data
listen.group = www-data
listen.mode = 0660

; Process manager settings
pm = dynamic
pm.max_children = 20          ; Reduced from 50 - max workers at any time
pm.start_servers = 5           ; Reduced from 10 - workers on startup
pm.min_spare_servers = 2       ; Reduced from 5 - minimum idle workers
pm.max_spare_servers = 8       ; Reduced from 20 - maximum idle workers
pm.max_requests = 200          ; Reduced from 500 - recycle workers after N requests
pm.process_idle_timeout = 30s  ; Kill idle workers after 30 seconds
request_terminate_timeout = 30s ; Kill requests that run longer than 30 seconds

; Catch worker output
catch_workers_output = yes

; Clear environment
clear_env = no
